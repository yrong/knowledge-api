[
  {
    "name": "add article 1",
    "method": "POST",
    "url": "http://localhost:3000/KB/API/v1/articles",
    "body": {
      "token": "77e52d6fbd1bbc673e6662d1f26c3d778785d471",
      "title": "水电费",
      "it_service": [
        "0963c7d0-f5c7-11e6-b240-eb7da0788697"
      ],
      "tag": [
        "测试",
        "随机"
      ],
      "author": "随机",
      "ref_links": [
        "https://www.baidu.com/"
      ],
      "tasks": "测试插入",
      "type": "Troubleshooting",
      "content": {
        "description": "水电费",
        "analysis": "水电费",
        "solution": "前几天，我的邻居小伙伴突然在QQ上问我突然在不，她比我大几岁，平日里交集不算太多，这么冷不丁的来一句“在吗？”，让我误以为是骗子又来实施诈骗了",
        "workaround": "水电费"
      }
    }
  },
  {
    "name": "search discussions  by topic",
    "method": "POST",
    "url": "http://localhost:3000/KB/API/v1/discussions/search",
    "body": {
      "filter": {
        "type": "topic"
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "query it service group from cmdb-api",
    "method": "GET",
    "url": "http://localhost:3001/api/it_services/group/"
  },
  {
    "name": "search discussions  by keyword and topic",
    "method": "POST",
    "url": "http://localhost:3000/KB/API/v1/discussions/search",
    "body": {
      "filter": {
        "type": "topic",
        "keyword": {
          "$fulltext": "测试"
        }
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "get article 2",
    "method": "GET",
    "url": "http://localhost:3000/KB/API/v1/articles/1bf83ae6-9399-4d9e-bded-2fe4b6ea5f15"
  },
  {
    "name": "add article 1_1",
    "method": "POST",
    "url": "http://localhost:3000/KB/API/v1/articles",
    "body": {
      "token": "77e52d6fbd1bbc673e6662d1f26c3d778785d471",
      "title": "水电费",
      "it_service": [
        "096a5780-f5c7-11e6-b240-eb7da0788697",
        "0971aa80-f5c7-11e6-b240-eb7da0788697",
        "0963c7d0-f5c7-11e6-b240-eb7da0788697"
      ],
      "tag": [
        "测试",
        "随机"
      ],
      "author": "随机",
      "ref_links": [
        "https://www.baidu.com/"
      ],
      "tasks": "测试插入",
      "type": "Troubleshooting",
      "content": {
        "description": "水电费",
        "analysis": "水电费",
        "solution": "前几天，我的邻居小伙伴突然在QQ上问我突然在不，她比我大几岁，平日里交集不算太多，这么冷不丁的来一句“在吗？”，让我误以为是骗子又来实施诈骗了",
        "workaround": "水电费"
      }
    }
  },
  {
    "name": "search reply discussions  by article id",
    "method": "POST",
    "url": "http://localhost:3000/KB/API/v1/discussions/search",
    "body": {
      "filter": {
        "article_id": "c62000c5-85f4-4bba-882b-c3c3f80cf1f6",
        "type": "reply"
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "search articles  by filter with  ITServiceGroup Messaging",
    "method": "POST",
    "url": "http://localhost:3000/KB/API/v1/articles/search",
    "body": {
      "filter": {
        "type": "",
        "it_service": {
          "$overlap": [
            "Messaging"
          ]
        },
        "$or": [
          {
            "tag": {
              "$overlap": [
                "测试"
              ]
            }
          },
          {
            "keyword": {
              "$fulltext": "水电费"
            }
          }
        ]
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "patch article 2",
    "method": "PATCH",
    "url": "http://localhost:3000/KB/API/v1/articles/1bf83ae6-9399-4d9e-bded-2fe4b6ea5f15",
    "body": {
      "token": "77e52d6fbd1bbc673e6662d1f26c3d778785d471",
      "title": "停车费"
    }
  },
  {
    "name": " count articles and discussions by it service group and filter by keyword",
    "method": "POST",
    "url": "http://localhost:3000/KB/API/v1/articles/search",
    "body": {
      "filter": {
        "type": "Troubleshooting",
        "$or": [
          {
            "tag": {
              "$overlap": [
                "测试"
              ]
            }
          },
          {
            "keyword": {
              "$fulltext": "水电费"
            }
          }
        ]
      },
      "countBy": "ITServiceGroup"
    }
  },
  {
    "name": "get all articles",
    "method": "GET",
    "url": "http://localhost:3000/KB/API/v1/articles"
  },
  {
    "name": "search articles  by filter with name of ITService",
    "method": "POST",
    "url": "http://localhost:3000/KB/API/v1/articles/search",
    "body": {
      "filter": {
        "type": "",
        "it_service": {
          "$overlap": [
            "pop3",
            "email"
          ]
        },
        "$or": [
          {
            "tag": {
              "$overlap": [
                "人生"
              ]
            }
          },
          {
            "keyword": {
              "$fulltext": "水电费"
            }
          }
        ]
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "get all tags",
    "method": "GET",
    "url": "http://localhost:3000/KB/API/v1/articles/tag"
  },
  {
    "name": "add article 2 with token in cookie",
    "method": "POST",
    "url": "http://localhost:3000/KB/API/v1/articles",
    "body": {
      "title": "煤气费",
      "it_service": [
        "0971aa80-f5c7-11e6-b240-eb7da0788697"
      ],
      "tag": [
        "测试",
        "随机"
      ],
      "author": "随机",
      "ref_links": [
        "https://www.baidu.com"
      ],
      "tasks": "测试插入",
      "type": "Troubleshooting",
      "content": {
        "description": "煤气费",
        "analysis": "煤气费",
        "solution": "前几天，我的邻居小伙伴突然在QQ上问我突然在不，她比我大几岁，平日里交集不算太多，这么冷不丁的来一句“在吗？”，让我误以为是骗子又来实施诈骗了",
        "workaround": "煤气费"
      }
    }
  },
  {
    "name": "modify article 2",
    "method": "PUT",
    "url": "http://localhost:3000/KB/API/v1/articles/1bf83ae6-9399-4d9e-bded-2fe4b6ea5f15",
    "body": {
      "token": "77e52d6fbd1bbc673e6662d1f26c3d778785d471",
      "title": "煤气费",
      "tag": [
        "测试",
        "随机"
      ],
      "author": "随机",
      "ref_links": [
        "https://www.baidu.com"
      ],
      "tasks": "测试插入",
      "type": "Troubleshooting",
      "content": {
        "description": "煤气费",
        "analysis": "煤气费",
        "solution": "前几天，我的邻居小伙伴突然在QQ上问我突然在不，她比我大几岁，平日里交集不算太多，这么冷不丁的来一句“在吗？”，让我误以为是骗子又来实施诈骗了",
        "workaround": "煤气费"
      }
    }
  },
  {
    "name": "delete article 1_1",
    "method": "DELETE",
    "url": "http://localhost:3000/KB/API/v1/articles/e6e58e0a-1a99-42d1-82ae-bd3e11adee2a",
    "body": {
      "token": "77e52d6fbd1bbc673e6662d1f26c3d778785d471"
    }
  },
  {
    "name": "add discussion 1",
    "method": "POST",
    "url": "http://localhost:3000/KB/API/v1/discussions",
    "body": {
      "token": "77e52d6fbd1bbc673e6662d1f26c3d778785d471",
      "article_id": "c62000c5-85f4-4bba-882b-c3c3f80cf1f6",
      "from": "zhang_san",
      "to": [
        "li_si",
        "wang_wu"
      ],
      "content": "评论的测试内容水电费释放但",
      "type": "topic"
    }
  },
  {
    "name": "aggregate article 2",
    "method": "GET",
    "url": "http://localhost:3000/KB/API/v1/articles/1bf83ae6-9399-4d9e-bded-2fe4b6ea5f15/score/aggregate"
  },
  {
    "name": "score article 2",
    "method": "POST",
    "url": "http://localhost:3000/KB/API/v1/articles/1bf83ae6-9399-4d9e-bded-2fe4b6ea5f15/score",
    "body": {
      "token": "77e52d6fbd1bbc673e6662d1f26c3d778785d471",
      "score": 5
    }
  },
  {
    "name": "search articles  by filter with empty fields",
    "method": "POST",
    "url": "http://localhost:3000/KB/API/v1/articles/search",
    "body": {
      "filter": {
        "type": "",
        "it_service": {
          "$overlap": []
        },
        "$or": [
          {
            "tag": {
              "$overlap": [
                ""
              ]
            }
          },
          {
            "keyword": {
              "$fulltext": ""
            }
          }
        ]
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "delete articles",
    "method": "DELETE",
    "url": "http://localhost:3000/KB/API/v1/synergy",
    "body": {
      "token": "77e52d6fbd1bbc673e6662d1f26c3d778785d471"
    }
  },
  {
    "name": "search discussions  by reply id",
    "method": "POST",
    "url": "http://localhost:3000/KB/API/v1/discussions/search",
    "body": {
      "filter": {
        "reply_id": "477f42e6-f247-497b-a2a6-d8b217d0e16e"
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "query it service from cmdb-api",
    "method": "GET",
    "url": "http://localhost:3001/api/it_services/service/"
  },
  {
    "name": "search count of articles and discussions by it service keyword",
    "method": "POST",
    "url": "http://localhost:3000/KB/API/v1/articles/search",
    "body": {
      "filter": {
        "type": "Troubleshooting",
        "it_service": {
          "$overlap": [
            "pop3",
            "email"
          ]
        },
        "$or": [
          {
            "tag": {
              "$overlap": [
                "人生"
              ]
            }
          },
          {
            "keyword": {
              "$fulltext": "水电费"
            }
          }
        ]
      },
      "countOnly": true
    }
  },
  {
    "name": "search articles  by filter with name of ITServiceGroup",
    "method": "POST",
    "url": "http://localhost:3000/KB/API/v1/articles/search",
    "body": {
      "filter": {
        "type": "",
        "it_service": {
          "$overlap": [
            "Infrastructure"
          ]
        },
        "$or": [
          {
            "tag": {
              "$overlap": [
                "测试"
              ]
            }
          },
          {
            "keyword": {
              "$fulltext": "水电费"
            }
          }
        ]
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "add discussion 2 ",
    "method": "POST",
    "url": "http://localhost:3000/KB/API/v1/discussions",
    "body": {
      "token": "77e52d6fbd1bbc673e6662d1f26c3d778785d471",
      "article_id": "c62000c5-85f4-4bba-882b-c3c3f80cf1f6",
      "from": "li_si",
      "to": [
        "zhang_san",
        "wang_wu"
      ],
      "content": "测试内容水电费释放",
      "type": "reply",
      "reply_id": "477f42e6-f247-497b-a2a6-d8b217d0e16e"
    }
  },
  {
    "name": "add article with token invalid",
    "method": "POST",
    "url": "http://localhost:3000/KB/API/v1/articles",
    "body": {
      "token": "invalid",
      "title": "水电费",
      "it_service": [
        "096a5780-f5c7-11e6-b240-eb7da0788697",
        "0971aa80-f5c7-11e6-b240-eb7da0788697",
        "0963c7d0-f5c7-11e6-b240-eb7da0788697"
      ],
      "tag": [
        "测试",
        "随机"
      ],
      "author": "随机",
      "ref_links": [
        "https://www.baidu.com"
      ],
      "tasks": "测试插入",
      "type": "Troubleshooting",
      "content": {
        "description": "水电费",
        "analysis": "水电费",
        "solution": "前几天，我的邻居小伙伴突然在QQ上问我突然在不，她比我大几岁，平日里交集不算太多，这么冷不丁的来一句“在吗？”，让我误以为是骗子又来实施诈骗了",
        "workaround": "水电费"
      }
    }
  },
  {
    "name": "search discussions  by article id ",
    "method": "POST",
    "url": "http://localhost:3000/KB/API/v1/discussions/search",
    "body": {
      "filter": {
        "article_id": "c62000c5-85f4-4bba-882b-c3c3f80cf1f6"
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "get all discussions ",
    "method": "GET",
    "url": "http://localhost:3000/KB/API/v1/discussions"
  },
  {
    "name": "search discussions  by keyword or topic",
    "method": "POST",
    "url": "http://localhost:3000/KB/API/v1/discussions/search",
    "body": {
      "filter": {
        "$or": [
          {
            "type": "topic"
          },
          {
            "keyword": {
              "$fulltext": "测试"
            }
          }
        ]
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "get discussion 1",
    "method": "GET",
    "url": "http://localhost:3000/KB/API/v1/discussions/477f42e6-f247-497b-a2a6-d8b217d0e16e"
  }
]
