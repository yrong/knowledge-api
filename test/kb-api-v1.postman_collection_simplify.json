[
  {
    "name": "count articles and discussions by keyword author",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/search",
    "body": {
      "toke": "{{token}}",
      "filter": {
        "author": "随机"
      },
      "countOnly": true
    }
  },
  {
    "name": "search topic and related replies  by topic id",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions/search",
    "body": {
      "token": "{{token}}",
      "filter": {
        "$or": [
          {
            "uuid": "{{discussion_1_id}}"
          },
          {
            "reply_id": "{{discussion_1_id}}"
          }
        ]
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "search articles  order by discussion_count",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/search",
    "body": {
      "token": "{{token}}",
      "filter": {},
      "page": 1,
      "per_page": 2,
      "sortby": "discussion_count",
      "order": "desc"
    }
  },
  {
    "name": "search replies by article id",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions/search",
    "body": {
      "filter": {
        "article_id": "{{article_1_id}}",
        "type": "reply"
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "search articles  by filter with empty fields",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/search",
    "body": {
      "token": "{{token}}",
      "filter": {
        "type": "",
        "it_service": {
          "$overlap": [
            ""
          ]
        },
        "$or": [
          {
            "tag": {
              "$overlap": [
                ""
              ]
            }
          },
          {
            "keyword": {
              "$fulltext": ""
            }
          }
        ]
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "count articles and discussions by keyword",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/search",
    "body": {
      "toke": "{{token}}",
      "filter": {
        "type": "Troubleshooting",
        "it_service": {
          "$overlap": [
            "pop3",
            "email"
          ]
        },
        "$or": [
          {
            "tag": {
              "$overlap": [
                "人生"
              ]
            }
          },
          {
            "keyword": {
              "$fulltext": "水电费"
            }
          }
        ]
      },
      "countOnly": true
    }
  },
  {
    "name": "search articles  by filter with name of ITServiceGroup",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/search",
    "body": {
      "filter": {
        "type": "",
        "it_service": {
          "$overlap": [
            "Infrastructure"
          ]
        },
        "$or": [
          {
            "tag": {
              "$overlap": [
                "测试"
              ]
            }
          },
          {
            "keyword": {
              "$fulltext": "水电费"
            }
          }
        ]
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "article timeline search by status",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/history/timeline",
    "body": {
      "token": "{{token}}",
      "filter": {
        "status": 0
      }
    }
  },
  {
    "name": "delete articles",
    "method": "DELETE",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/synergy",
    "body": {
      "token": "{{token}}"
    }
  },
  {
    "name": "aggregate article 2",
    "method": "GET",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/dd78dfca-1edf-47c6-98b8-7b2073100dcb/score/aggregate"
  },
  {
    "name": "reply topic 1",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions",
    "body": {
      "token": "{{token}}",
      "article_id": "{{article_1_id}}",
      "from": "li_si",
      "to": [
        "zhang_san",
        "wang_wu"
      ],
      "content": "测试内容水电费释放",
      "type": "reply",
      "reply_id": "{{discussion_1_id}}"
    }
  },
  {
    "name": "search replies by topic id",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions/search",
    "body": {
      "filter": {
        "reply_id": "{{discussion_1_id}}"
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "delete article 1_1",
    "method": "DELETE",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/9a5c74e8-3ec9-46d4-b043-8a7207780955",
    "body": {
      "token": "{{token}}"
    }
  },
  {
    "name": "search discussions  by article id",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions/search",
    "body": {
      "token": "{{token}}",
      "filter": {
        "article_id": "{{article_1_id}}"
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": " count articles and discussions by it service group and filter by keyword",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/search",
    "body": {
      "filter": {},
      "countBy": "ITServiceGroup"
    }
  },
  {
    "name": "score article 2",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/dd78dfca-1edf-47c6-98b8-7b2073100dcb/score",
    "body": {
      "token": "{{token}}",
      "score": 5
    }
  },
  {
    "name": "add topic 1",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions",
    "body": {
      "token": "{{token}}",
      "article_id": "{{article_1_id}}",
      "from": "zhang_san",
      "to": [
        "li_si",
        "wang_wu"
      ],
      "content": "评论的测试内容水电费释放但",
      "type": "topic"
    }
  },
  {
    "name": "query it service group from cmdb-api",
    "method": "GET",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/it_services/group/"
  },
  {
    "name": "get all tags",
    "method": "GET",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/tag"
  },
  {
    "name": "add article 2 with token in cookie",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles",
    "body": {
      "token": "{{token}}",
      "title": "煤气费",
      "it_service": [
        "{{service_dns_uuid}}"
      ],
      "tag": [
        "测试",
        "随机"
      ],
      "author": "随机",
      "ref_links": [
        "https://www.baidu.com"
      ],
      "tasks": "测试插入",
      "type": "Troubleshooting",
      "content": {
        "description": "煤气费",
        "analysis": "煤气费",
        "solution": "前几天，我的邻居小伙伴突然在QQ上问我突然在不，她比我大几岁，平日里交集不算太多，这么冷不丁的来一句“在吗？”，让我误以为是骗子又来实施诈骗了",
        "workaround": "煤气费"
      }
    }
  },
  {
    "name": "add article 1_1",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles",
    "body": {
      "token": "{{token}}",
      "title": "水电费",
      "it_service": [
        "b1844cb0-4bde-11e7-84a3-c1203c9549ce"
      ],
      "tag": [
        "测试",
        "随机"
      ],
      "author": "随机",
      "ref_links": [
        "https://www.baidu.com/"
      ],
      "tasks": "测试插入",
      "type": "Troubleshooting",
      "content": {
        "description": "水电费",
        "analysis": "水电费",
        "solution": "前几天，我的邻居小伙伴突然在QQ上问我突然在不，她比我大几岁，平日里交集不算太多，这么冷不丁的来一句“在吗？”，让我误以为是骗子又来实施诈骗了",
        "workaround": "水电费"
      }
    }
  },
  {
    "name": "article timeline search by article_id",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/history/timeline",
    "body": {
      "token": "{{token}}",
      "filter": {
        "article_id": "{{article_2_id}}"
      }
    }
  },
  {
    "name": "get article 2",
    "method": "GET",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/dd78dfca-1edf-47c6-98b8-7b2073100dcb?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIzMWVlMWY1Mi03Y2Y0LTRmZjMtOTNjNS04YTdhMzI5YTA4MGYiLCJ1c2VyIjp7ImlkIjo2NTEsInBlcl9wYWdlIjo5MCwiYXZhdGFyIjoiL3VwbG9hZC9hdmF0YXIvY2E5MmQ1NjAtMDVhNi0xMWU3LTk4YmEtZTFkMDhkZjlhMjVmIiwidHlwZSI6MSwiYXR0ZW1wdF9pcCI6IjEwLjUwLjEzLjY5IiwidXNlcmlkIjoxMDAsInV1aWQiOjEwMCwicGFzc3dkIjoiYWRtaW4iLCJzdXJuYW1lIjoiIiwibmFtZSI6ImFkbWluIiwiYWxpYXMiOiJhZG1pbiIsInRoZW1lIjoiZGVmYXVsdCIsImxhbmciOiJlbl9HQiIsImNhdGVnb3J5IjoiVXNlciJ9LCJpYXQiOjE0OTc1MTU5MDZ9.fi7hf5TlbdaIKzmCzeFh7NnIktdJQyUD2hWKS90Km9s"
  },
  {
    "name": "patch article 2",
    "method": "PUT",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/dd78dfca-1edf-47c6-98b8-7b2073100dcb",
    "body": {
      "token": "{{token}}",
      "title": "煤气费",
      "author": "张三"
    }
  },
  {
    "name": "query it service from cmdb-api",
    "method": "GET",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/it_services/service/"
  },
  {
    "name": "search discussions  by keyword or topic",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions/search",
    "body": {
      "filter": {
        "$or": [
          {
            "type": "topic"
          },
          {
            "keyword": {
              "$fulltext": "测试"
            }
          }
        ]
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "search articles  by filter with name of ITService",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/search",
    "body": {
      "filter": {
        "type": "",
        "$or": [
          {
            "it_service": {
              "$overlap": [
                "Messaging"
              ]
            }
          },
          {
            "tag": {
              "$overlap": [
                "测试"
              ]
            }
          },
          {
            "keyword": {
              "$fulltext": "水电费"
            }
          }
        ]
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "login",
    "method": "POST",
    "url": "http://{{auth_api_host}}:{{auth_api_port}}/auth/login",
    "body": {
      "username": "{{auth_user}}",
      "password": "{{auth_passwd}}"
    }
  },
  {
    "name": "get all articles",
    "method": "GET",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles"
  },
  {
    "name": "patch article 2",
    "method": "PATCH",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/dd78dfca-1edf-47c6-98b8-7b2073100dcb",
    "body": {
      "token": "{{token}}",
      "title": "停车费",
      "attachment": [
        "http://locahost/hello.txt"
      ]
    }
  },
  {
    "name": "get all discussions ",
    "method": "GET",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions"
  },
  {
    "name": "article timeline update status",
    "method": "PUT",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/history/timeline/f7d02afb-65b5-465a-bf07-c175286eeba1",
    "body": {
      "token": "{{token}}",
      "status": 1
    }
  },
  {
    "name": "add article 1",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles",
    "body": {
      "token": "{{token}}",
      "title": "水电费",
      "it_service": [
        "{{service_email_uuid}}"
      ],
      "tag": [
        "测试",
        "随机"
      ],
      "author": "随机",
      "ref_links": [
        "https://www.baidu.com/"
      ],
      "tasks": "测试插入",
      "type": "Troubleshooting",
      "content": {
        "description": "水电费",
        "analysis": "水电费",
        "solution": "前几天，我的邻居小伙伴突然在QQ上问我突然在不，她比我大几岁，平日里交集不算太多，这么冷不丁的来一句“在吗？”，让我误以为是骗子又来实施诈骗了",
        "workaround": "水电费"
      }
    }
  },
  {
    "name": "search articles  by filter with author",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/search",
    "body": {
      "filter": {
        "author": "随机"
      },
      "page": 1,
      "per_page": 1,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "get topic 1",
    "method": "GET",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions/6c7d174b-7bb6-47ae-8d18-1ca5732a298b"
  },
  {
    "name": "search reply by topic id",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions/search",
    "body": {
      "filter": {
        "uuid": "{{discussion_1_id}}"
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "search discussions  by topic",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions/search",
    "body": {
      "filter": {
        "type": "topic"
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "search discussions  by keyword and topic",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions/search",
    "body": {
      "filter": {
        "type": "topic",
        "keyword": {
          "$fulltext": "测试"
        }
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  }
]
