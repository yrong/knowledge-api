[
  {
    "name": "get article 2",
    "method": "GET",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/{{article_2_id}}?token={{token}}"
  },
  {
    "name": "search articles  by filter with name of ITServiceGroup",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/search",
    "body": {
      "filter": {
        "type": "",
        "it_service": {
          "$overlap": [
            "Infrastructure"
          ]
        },
        "$or": [
          {
            "tag": {
              "$overlap": [
                "测试"
              ]
            }
          },
          {
            "keyword": {
              "$fulltext": "水电费"
            }
          }
        ]
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "search articles  order by discussion_count",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/search",
    "body": {
      "token": "{{token}}",
      "filter": {},
      "page": 1,
      "per_page": 2,
      "sortby": "discussion_count",
      "order": "desc"
    }
  },
  {
    "name": "add article 1_1",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles",
    "body": {
      "token": "{{token}}",
      "title": "水电费",
      "it_service": [
        "b1844cb0-4bde-11e7-84a3-c1203c9549ce"
      ],
      "tag": [
        "测试",
        "随机"
      ],
      "author": "{{auth_user_id}}",
      "ref_links": [
        "https://www.baidu.com/"
      ],
      "tasks": "测试插入",
      "type": "Troubleshooting",
      "content": {
        "description": "水电费",
        "analysis": "水电费",
        "solution": "前几天，我的邻居小伙伴突然在QQ上问我突然在不，她比我大几岁，平日里交集不算太多，这么冷不丁的来一句“在吗？”，让我误以为是骗子又来实施诈骗了",
        "workaround": "水电费"
      }
    }
  },
  {
    "name": "search replies by article id",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions/search",
    "body": {
      "filter": {
        "article_id": "{{article_1_id}}",
        "type": "reply"
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "add article 1",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles",
    "body": {
      "token": "{{token}}",
      "title": "水电费",
      "it_service": [
        "{{service_email_uuid}}"
      ],
      "tag": [
        "测试",
        "随机"
      ],
      "author": "{{auth_user_id}}",
      "ref_links": [
        "https://www.baidu.com/"
      ],
      "tasks": "测试插入",
      "type": "Troubleshooting",
      "content": {
        "description": "水电费",
        "analysis": "水电费",
        "solution": "前几天，我的邻居小伙伴突然在QQ上问我突然在不，她比我大几岁，平日里交集不算太多，这么冷不丁的来一句“在吗？”，让我误以为是骗子又来实施诈骗了",
        "workaround": "水电费"
      }
    }
  },
  {
    "name": "query it service group from cmdb-api",
    "method": "GET",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/it_services/group/"
  },
  {
    "name": "search replies by topic id",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions/search",
    "body": {
      "filter": {
        "reply_id": "{{discussion_1_id}}"
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "count articles and discussions by keyword",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/search",
    "body": {
      "toke": "{{token}}",
      "filter": {
        "type": "Troubleshooting",
        "it_service": {
          "$overlap": [
            "pop3",
            "email"
          ]
        },
        "$or": [
          {
            "tag": {
              "$overlap": [
                "人生"
              ]
            }
          },
          {
            "keyword": {
              "$fulltext": "水电费"
            }
          }
        ]
      },
      "countOnly": true
    }
  },
  {
    "name": "delete articles",
    "method": "DELETE",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/synergy",
    "body": {
      "token": "{{token}}"
    }
  },
  {
    "name": "search discussions  by article id",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions/search",
    "body": {
      "token": "{{token}}",
      "filter": {
        "article_id": "{{article_1_id}}"
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "patch article 2",
    "method": "PATCH",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/{{article_2_id}}",
    "body": {
      "token": "{{token}}",
      "title": "停车费",
      "author": "{{auth_user_id}}"
    }
  },
  {
    "name": "aggregate article 2",
    "method": "GET",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/{{article_2_id}}/score/aggregate"
  },
  {
    "name": "search articles  by filter with author",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/search",
    "body": {
      "filter": {
        "author": "{{auth_user_id}}"
      },
      "page": 1,
      "per_page": 1,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "patch article 2",
    "method": "PUT",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/{{article_2_id}}",
    "body": {
      "token": "{{token}}",
      "title": "煤气费",
      "author": "{{auth_user_id}}"
    }
  },
  {
    "name": "add article free",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles",
    "body": {
      "token": "{{token}}",
      "title": "水电费",
      "it_service": [
        "{{service_email_uuid}}"
      ],
      "tag": [
        "测试",
        "随机"
      ],
      "author": "{{auth_user_id}}",
      "ref_links": [
        "https://www.baidu.com/"
      ],
      "tasks": "测试插入",
      "type": "Free",
      "content": {
        "description": "水电费",
        "analysis": "水电费",
        "solution": "前几天，我的邻居小伙伴突然在QQ上问我突然在不，她比我大几岁，平日里交集不算太多，这么冷不丁的来一句“在吗？”，让我误以为是骗子又来实施诈骗了",
        "workaround": "水电费"
      }
    }
  },
  {
    "name": "search reply by topic id",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions/search",
    "body": {
      "filter": {
        "uuid": "{{discussion_1_id}}"
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "reply topic 1",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions",
    "body": {
      "token": "{{token}}",
      "article_id": "{{article_1_id}}",
      "from": "li_si",
      "to": [
        "zhang_san",
        "wang_wu"
      ],
      "content": "测试内容水电费释放",
      "type": "reply",
      "reply_id": "{{discussion_1_id}}"
    }
  },
  {
    "name": "search discussions  by keyword and topic",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions/search",
    "body": {
      "filter": {
        "type": "topic",
        "keyword": {
          "$fulltext": "测试"
        }
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "query it service from cmdb-api",
    "method": "GET",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/it_services/service/"
  },
  {
    "name": "get topic 1",
    "method": "GET",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions/{{discussion_1_id}}"
  },
  {
    "name": " count articles and discussions by it service group and filter by keyword",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/search",
    "body": {
      "filter": {},
      "countBy": "ITServiceGroup"
    }
  },
  {
    "name": "get all articles",
    "method": "GET",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles?page=1&per_page=2"
  },
  {
    "name": "delete article 1_1",
    "method": "DELETE",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/{{article_1_1_id}}",
    "body": {
      "token": "{{token}}",
      "author": "{{auth_user_id}}"
    }
  },
  {
    "name": "search topic and related replies  by topic id",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions/search",
    "body": {
      "token": "{{token}}",
      "filter": {
        "$or": [
          {
            "uuid": "{{discussion_1_id}}"
          },
          {
            "reply_id": "{{discussion_1_id}}"
          }
        ]
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "add article 2",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles",
    "body": {
      "token": "{{token}}",
      "title": "煤气费",
      "it_service": [
        "{{service_dns_uuid}}"
      ],
      "tag": [
        "测试",
        "随机"
      ],
      "author": "{{auth_user_id}}",
      "ref_links": [
        "https://www.baidu.com"
      ],
      "tasks": "测试插入",
      "type": "Troubleshooting",
      "content": {
        "description": "煤气费",
        "analysis": "煤气费",
        "solution": "前几天，我的邻居小伙伴突然在QQ上问我突然在不，她比我大几岁，平日里交集不算太多，这么冷不丁的来一句“在吗？”，让我误以为是骗子又来实施诈骗了",
        "workaround": "煤气费"
      },
      "attachment": [
        {
          "href": "http://locahost/hello.txt",
          "size": 100,
          "name": "hello"
        },
        {
          "href": "http://locahost/test.txt",
          "size": 100,
          "name": "test"
        }
      ]
    }
  },
  {
    "name": "get all tags",
    "method": "GET",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/tag"
  },
  {
    "name": "score article 2",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/{{article_2_id}}/score",
    "body": {
      "token": "{{token}}",
      "score": 5
    }
  },
  {
    "name": "search articles  by filter with empty fields",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/search",
    "body": {
      "token": "{{token}}",
      "filter": {
        "type": "",
        "it_service": {
          "$overlap": [
            ""
          ]
        },
        "$or": [
          {
            "tag": {
              "$overlap": [
                ""
              ]
            }
          },
          {
            "keyword": {
              "$fulltext": ""
            }
          }
        ]
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "search discussions  by keyword or topic",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions/search",
    "body": {
      "filter": {
        "$or": [
          {
            "type": "topic"
          },
          {
            "keyword": {
              "$fulltext": "测试"
            }
          }
        ]
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "login",
    "method": "POST",
    "url": "http://{{auth_api_host}}:{{auth_api_port}}/auth/login",
    "body": {
      "username": "{{auth_user}}",
      "password": "{{auth_passwd}}"
    }
  },
  {
    "name": "add article guide",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles",
    "body": {
      "token": "{{token}}",
      "title": "水电费",
      "it_service": [
        "{{service_pop3_uuid}}"
      ],
      "tag": [
        "测试",
        "随机"
      ],
      "author": "{{auth_user_id}}",
      "ref_links": [
        "https://www.baidu.com/"
      ],
      "tasks": "测试插入",
      "type": "Guide",
      "content": {
        "description": "水电费",
        "analysis": "水电费",
        "solution": "前几天，我的邻居小伙伴突然在QQ上问我突然在不，她比我大几岁，平日里交集不算太多，这么冷不丁的来一句“在吗？”，让我误以为是骗子又来实施诈骗了",
        "workaround": "水电费"
      }
    }
  },
  {
    "name": "add article share",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles",
    "body": {
      "token": "{{token}}",
      "title": "水电费",
      "it_service": [
        "{{service_email_uuid}}"
      ],
      "tag": [
        "测试",
        "随机"
      ],
      "author": "{{auth_user_id}}",
      "ref_links": [
        "https://www.baidu.com/"
      ],
      "tasks": "测试插入",
      "type": "Share",
      "content": {
        "description": "水电费",
        "analysis": "水电费",
        "solution": "前几天，我的邻居小伙伴突然在QQ上问我突然在不，她比我大几岁，平日里交集不算太多，这么冷不丁的来一句“在吗？”，让我误以为是骗子又来实施诈骗了",
        "workaround": "水电费"
      }
    }
  },
  {
    "name": "get all discussions ",
    "method": "GET",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions"
  },
  {
    "name": "search articles  by filter with name of ITService",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/search",
    "body": {
      "filter": {
        "type": "",
        "$or": [
          {
            "it_service": {
              "$overlap": [
                "Messaging"
              ]
            }
          },
          {
            "tag": {
              "$overlap": [
                "测试"
              ]
            }
          },
          {
            "keyword": {
              "$fulltext": "水电费"
            }
          }
        ]
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "add topic 1",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions",
    "body": {
      "token": "{{token}}",
      "article_id": "{{article_1_id}}",
      "from": "zhang_san",
      "to": [
        "li_si",
        "wang_wu"
      ],
      "content": "评论的测试内容水电费释放但",
      "type": "topic"
    }
  },
  {
    "name": "search discussions  by topic",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions/search",
    "body": {
      "filter": {
        "type": "topic"
      },
      "page": 1,
      "per_page": 2,
      "sortby": "createdAt",
      "order": "desc"
    }
  },
  {
    "name": "count articles and discussions by keyword author",
    "method": "POST",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/search",
    "body": {
      "toke": "{{token}}",
      "filter": {
        "author": "{{auth_user_id}}"
      },
      "countOnly": true
    }
  }
]
