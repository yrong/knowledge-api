{
	"info": {
		"name": "kb-api",
		"_postman_id": "a30e07cb-a73c-bf99-7ac5-feb12f989e88",
		"description": "",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "0-prepare",
			"description": "",
			"item": [
				{
					"name": "login",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"token found\"] = jsonData.data.token;",
									"postman.setEnvironmentVariable(\"token\", jsonData.data.token);",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Cookie",
								"value": "token={{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"username\":\"{{auth_user}}\",\n  \"password\":\"{{auth_passwd}}\"\n}"
						},
						"url": {
							"raw": "http://{{auth_api_host}}:{{auth_api_port}}/auth/login",
							"protocol": "http",
							"host": [
								"{{auth_api_host}}"
							],
							"port": "{{auth_api_port}}",
							"path": [
								"auth",
								"login"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "delete articles",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Cookie",
								"value": "token={{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "\n  {\n    \"token\":\"{{token}}\"\n   }\n\n"
						},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/hidden",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"hidden"
							]
						},
						"description": ""
					},
					"response": []
				}
			]
		},
		{
			"name": "1-article",
			"description": "",
			"item": [
				{
					"name": "add article 1",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"jsonData = jsonData.data||jsonData;",
									"tests[\"uuid found\"] = jsonData.uuid;",
									"postman.setEnvironmentVariable(\"article_1_id\", jsonData.uuid);"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"token\":\"{{token}}\",\n    \"title\": \"水电费\",\n    \"it_service\": [\"{{service_email_id}}\"],\n    \"tag\": [\"测试\",\"随机\"],\n  \"author\": \"{{auth_user_id}}\",\n  \"ref_links\": [\"https://www.baidu.com/\"],\n  \"tasks\": \"测试插入\",\n  \"type\":\"Troubleshooting\",\n  \"content\":{\"description\": \"水电费\", \"analysis\": \"水电费\", \"solution\":\"前几天，我的邻居小伙伴突然在QQ上问我突然在不，她比我大几岁，平日里交集不算太多，这么冷不丁的来一句“在吗？”，让我误以为是骗子又来实施诈骗了\",\"workaround\": \"水电费\"}\n }\n\n"
						},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"articles"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "add article 1_1",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"jsonData = jsonData.data||jsonData;",
									"tests[\"uuid found\"] = jsonData.uuid;",
									"postman.setEnvironmentVariable(\"article_1_1_id\", jsonData.uuid);"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "token",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"token\":\"{{token}}\",\n    \"title\": \"水电费\",\n    \"it_service\": [\"b1844cb0-4bde-11e7-84a3-c1203c9549ce\"],\n    \"tag\": [\"测试\",\"随机\"],\n  \"author\": \"{{auth_user_id}}\",\n  \"ref_links\": [\"https://www.baidu.com/\"],\n  \"tasks\": \"测试插入\",\n  \"type\":\"Troubleshooting\",\n  \"content\":{\"description\": \"水电费\", \"analysis\": \"水电费\", \"solution\":\"前几天，我的邻居小伙伴突然在QQ上问我突然在不，她比我大几岁，平日里交集不算太多，这么冷不丁的来一句“在吗？”，让我误以为是骗子又来实施诈骗了\",\"workaround\": \"水电费\"}\n }\n\n"
						},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"articles"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "delete article 1_1",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"delete success\"] = responseCode.code == 200;"
								]
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "token",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"token\":\"{{token}}\",\n  \"author\": \"{{auth_user_id}}\"\n}\n"
						},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/{{article_1_1_id}}",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"articles",
								"{{article_1_1_id}}"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "add article 2",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"jsonData = jsonData.data||jsonData;",
									"tests[\"uuid found\"] = jsonData.uuid;",
									"postman.setEnvironmentVariable(\"article_2_id\", jsonData.uuid);"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"token\":\"{{token}}\",\n    \"title\": \"煤气费\",\n    \"it_service\": [\"{{service_dns_id}}\"],\n    \"tag\": [\"测试\",\"随机\"],\n  \"author\": \"{{auth_user_id}}\",\n  \"ref_links\": [\"https://www.baidu.com\"],\n  \"tasks\": \"测试插入\",\n  \"type\":\"Troubleshooting\",\n  \"content\":{\"description\": \"煤气费\", \"analysis\": \"煤气费\", \"solution\":\"前几天，我的邻居小伙伴突然在QQ上问我突然在不，她比我大几岁，平日里交集不算太多，这么冷不丁的来一句“在吗？”，让我误以为是骗子又来实施诈骗了\",\"workaround\": \"煤气费\"},\n  \"attachment\":[{\"href\":\"http://locahost/hello.txt\",\"size\":100,\"name\":\"hello\"},{\"href\":\"http://locahost/test.txt\",\"size\":100,\"name\":\"test\"}]\n }\n\n"
						},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"articles"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "patch article 2",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"article patched\"] =  responseCode.code == 200;"
								]
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "token",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "\n  {\n    \"token\":\"{{token}}\",\n      \"title\": \"停车费\",\n     \"author\": \"{{auth_user_id}}\"\n   }\n\n"
						},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/{{article_2_id}}",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"articles",
								"{{article_2_id}}"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "add article free",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"jsonData = jsonData.data||jsonData;",
									"tests[\"uuid found\"] = jsonData.uuid;"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "token",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"token\":\"{{token}}\",\n    \"title\": \"水电费\",\n    \"it_service\": [\"{{service_email_id}}\"],\n    \"tag\": [\"测试\",\"随机\"],\n  \"author\": \"{{auth_user_id}}\",\n  \"ref_links\": [\"https://www.baidu.com/\"],\n  \"tasks\": \"测试插入\",\n  \"type\":\"Free\",\n  \"content\":{\"description\": \"水电费\", \"analysis\": \"水电费\", \"solution\":\"前几天，我的邻居小伙伴突然在QQ上问我突然在不，她比我大几岁，平日里交集不算太多，这么冷不丁的来一句“在吗？”，让我误以为是骗子又来实施诈骗了\",\"workaround\": \"水电费\"}\n }\n\n"
						},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"articles"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "add article guide",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"jsonData = jsonData.data||jsonData;",
									"tests[\"uuid found\"] = jsonData.uuid;"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "token",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"token\":\"{{token}}\",\n    \"title\": \"水电费\",\n    \"it_service\": [\"{{service_pop3_id}}\"],\n    \"tag\": [\"测试\",\"随机\"],\n  \"author\": \"{{auth_user_id}}\",\n  \"ref_links\": [\"https://www.baidu.com/\"],\n  \"tasks\": \"测试插入\",\n  \"type\":\"Guide\",\n  \"content\":{\"description\": \"水电费\", \"analysis\": \"水电费\", \"solution\":\"前几天，我的邻居小伙伴突然在QQ上问我突然在不，她比我大几岁，平日里交集不算太多，这么冷不丁的来一句“在吗？”，让我误以为是骗子又来实施诈骗了\",\"workaround\": \"水电费\"}\n }\n\n"
						},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"articles"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "add article share",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"jsonData = jsonData.data||jsonData;",
									"tests[\"uuid found\"] = jsonData.uuid;"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "token",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"token\":\"{{token}}\",\n    \"title\": \"水电费\",\n    \"it_service\": [\"{{service_email_id}}\"],\n    \"tag\": [\"测试\",\"随机\"],\n  \"author\": \"{{auth_user_id}}\",\n  \"ref_links\": [\"https://www.baidu.com/\"],\n  \"tasks\": \"测试插入\",\n  \"type\":\"Share\",\n  \"content\":{\"description\": \"水电费\", \"analysis\": \"水电费\", \"solution\":\"前几天，我的邻居小伙伴突然在QQ上问我突然在不，她比我大几岁，平日里交集不算太多，这么冷不丁的来一句“在吗？”，让我误以为是骗子又来实施诈骗了\",\"workaround\": \"水电费\"}\n }\n\n"
						},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"articles"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "get article 2",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"jsonData = jsonData.data||jsonData;",
									"tests[\"article found\"] = jsonData.uuid === environment['article_2_id']"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "token",
								"value": "{{token}}"
							}
						],
						"body": {},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/{{article_2_id}}?token={{token}}",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"articles",
								"{{article_2_id}}"
							],
							"query": [
								{
									"key": "token",
									"value": "{{token}}",
									"equals": true
								}
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "get all articles",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"jsonData = jsonData.data||jsonData;",
									"tests[\"article found\"] = jsonData.count >= 1"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "token",
								"value": "{{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles?page=1&per_page=2",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"articles"
							],
							"query": [
								{
									"key": "page",
									"value": "1",
									"equals": true
								},
								{
									"key": "per_page",
									"value": "2",
									"equals": true
								}
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "score article 2",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"operation success\"] = responseCode.code == 200;"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "token",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "\n  {\n    \"token\":\"{{token}}\",\n      \"score\": 5\n   }\n\n"
						},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/{{article_2_id}}/score",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"articles",
								"{{article_2_id}}",
								"score"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "aggregate article 2",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"jsonData = jsonData.data||jsonData;",
									"tests[\"avg is 5\"] = jsonData.avg==5;"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "token",
								"value": "{{token}}"
							}
						],
						"body": {},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/{{article_2_id}}/score/aggregate",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"articles",
								"{{article_2_id}}",
								"score",
								"aggregate"
							]
						},
						"description": ""
					},
					"response": []
				}
			]
		},
		{
			"name": "2-discussion",
			"description": "",
			"item": [
				{
					"name": "add topic 1",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"jsonData = jsonData.data||jsonData;",
									"tests[\"uuid found\"] = jsonData.uuid;",
									"postman.setEnvironmentVariable(\"discussion_1_id\", jsonData.uuid);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "token",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "\n  {\n    \"token\":\"{{token}}\",\n    \"article_id\":\"{{article_1_id}}\",\n      \"from\": \"{{auth_user_id}}\",\n      \"to\": [\"{{auth_user}}\"],\n       \"content\": \"评论的测试内容水电费释放但\",\n     \"type\": \"topic\"\n   }\n\n"
						},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"discussions"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "reply topic 1",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"jsonData = jsonData.data||jsonData;",
									"tests[\"uuid found\"] = jsonData.uuid;",
									"postman.setEnvironmentVariable(\"discussion_2_id\", jsonData.uuid);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "\n  {\n    \"token\":\"{{token}}\",\n    \"article_id\":\"{{article_1_id}}\",\n      \"from\": \"{{auth_user_id}}\",\n      \"to\": [\"{{auth_user}}\"],\n       \"content\": \"测试内容水电费释放\",\n     \"type\": \"reply\",\n     \"reply_id\":\"{{discussion_1_id}}\"\n   }\n\n"
						},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"discussions"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "get topic 1",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"jsonData = jsonData.data||jsonData;",
									"tests[\"discussion found\"] = jsonData.uuid === environment['discussion_1_id']"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "token",
								"value": "{{token}}"
							}
						],
						"body": {},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions/{{discussion_1_id}}",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"discussions",
								"{{discussion_1_id}}"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "add topic 2",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"jsonData = jsonData.data||jsonData;",
									"tests[\"uuid found\"] = jsonData.uuid;",
									"postman.setEnvironmentVariable(\"discussion_2_id\", jsonData.uuid);"
								],
								"id": "334eaa4d-6d64-400a-b339-a154942ec2c5",
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "token",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "\n  {\n    \"article_id\":\"{{article_1_id}}\",\n      \"from\": \"{{auth_user_id}}\",\n      \"to\": [\"{{auth_user}}\"],\n       \"content\": \"评论的测试内容水电费释放但\",\n     \"type\": \"topic\"\n   }\n\n"
						},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"discussions"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "del topic 2",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"tests[\"article patched\"] =  responseCode.code == 200;"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "token",
								"value": "{{token}}"
							}
						],
						"body": {},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions/{{discussion_2_id}}",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"discussions",
								"{{discussion_2_id}}"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "get all discussions ",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"jsonData = jsonData.data||jsonData;",
									"tests[\"discussions found\"] = jsonData.count >= 1"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "token",
								"value": "{{token}}"
							}
						],
						"body": {},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"discussions"
							]
						},
						"description": ""
					},
					"response": []
				}
			]
		},
		{
			"name": "3-search&aggregate",
			"description": "",
			"item": [
				{
					"name": "search discussions  by article id",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"jsonData = jsonData.data||jsonData;",
									"tests[\"discussions found\"] = jsonData.count == 2"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "\n{\n  \"token\":\"{{token}}\",\n  \"filter\":\n  {\n   \"article_id\":\"{{article_1_id}}\"\n  },\n  \"page\":1,\n  \"per_page\":2,\n  \"sortby\":\"createdAt\",\n  \"order\":\"desc\"\n}\n\n\n"
						},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions/search",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"discussions",
								"search"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "search topic and related replies  by topic id",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"jsonData = jsonData.data||jsonData;",
									"tests[\"discussions found\"] = jsonData.count == 2"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Cookie",
								"value": "token={{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "\n{\n   \"token\":\"{{token}}\",\n  \"filter\":\n  {\n    \"$or\":[\n   {\"uuid\":\"{{discussion_1_id}}\"},\n   {\"reply_id\":\"{{discussion_1_id}}\"}\n    ]\n  },\n  \"page\":1,\n  \"per_page\":2,\n  \"sortby\":\"createdAt\",\n  \"order\":\"desc\"\n}\n\n\n"
						},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions/search",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"discussions",
								"search"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "search discussions  by topic",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"jsonData = jsonData.data||jsonData;",
									"tests[\"discussions found\"] = jsonData.count == 1"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "token",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "\n{\n  \"filter\":\n  {\n   \"type\":\"topic\"\n  },\n  \"page\":1,\n  \"per_page\":2,\n  \"sortby\":\"createdAt\",\n  \"order\":\"desc\"\n}\n\n\n"
						},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions/search",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"discussions",
								"search"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "search replies by topic id",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"jsonData = jsonData.data||jsonData;",
									"tests[\"discussions found\"] = jsonData.count == 1"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "token",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "\n{\n  \"filter\":\n  {\n   \"reply_id\":\"{{discussion_1_id}}\"\n  },\n  \"page\":1,\n  \"per_page\":2,\n  \"sortby\":\"createdAt\",\n  \"order\":\"desc\"\n}\n\n\n"
						},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions/search",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"discussions",
								"search"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "search replies by article id",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"jsonData = jsonData.data||jsonData;",
									"tests[\"discussions found\"] = jsonData.count == 1"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "token",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "\n{\n  \"filter\":\n  {\n   \"article_id\":\"{{article_1_id}}\",\n    \"type\":\"reply\"\n  },\n  \"page\":1,\n  \"per_page\":2,\n  \"sortby\":\"createdAt\",\n  \"order\":\"desc\"\n}\n\n\n"
						},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions/search",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"discussions",
								"search"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "search discussions  by keyword and topic",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"jsonData = jsonData.data||jsonData;",
									"tests[\"discussions found\"] = jsonData.count == 1"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "token",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "\n{\n  \"filter\":\n  {\n   \"type\": \"topic\",\n   \"keyword\":{\"$ts\":\"测试\"}\n  },\n  \"page\":1,\n  \"per_page\":2,\n  \"sortby\":\"createdAt\",\n  \"order\":\"desc\"\n}\n\n\n"
						},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions/search",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"discussions",
								"search"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "search discussions  by keyword or topic",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"jsonData = jsonData.data||jsonData;",
									"tests[\"discussions found\"] = jsonData.count == 2"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "token",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "\n{\n  \"filter\":\n  {\n    \"$or\":[{\"type\": \"topic\"},{\"keyword\":{\"$ts\":\"测试\"}}]\n  },\n  \"page\":1,\n  \"per_page\":2,\n  \"sortby\":\"createdAt\",\n  \"order\":\"desc\"\n}\n\n\n"
						},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions/search",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"discussions",
								"search"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "search reply by topic id",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"jsonData = jsonData.data||jsonData;",
									"tests[\"discussions found\"] = jsonData.count == 1"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "token",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "\n{\n  \"filter\":\n  {\n   \"uuid\":\"{{discussion_1_id}}\"\n  },\n  \"page\":1,\n  \"per_page\":2,\n  \"sortby\":\"createdAt\",\n  \"order\":\"desc\"\n}\n\n\n"
						},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/discussions/search",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"discussions",
								"search"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "search articles  by filter with author",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"jsonData = jsonData.data||jsonData;",
									"tests[\"discussions found\"] = jsonData.count >= 1"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "token",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "\n{\n  \"filter\":\n  {\n   \"author\": \"{{auth_user_id}}\",\n   \"keyword\":{\"$ts\":\"水电费\"}\n  },\n  \"page\":1,\n  \"per_page\":1,\n  \"sortby\":\"createdAt\",\n  \"order\":\"desc\"\n}\n\n"
						},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/search",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"articles",
								"search"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "search articles  by filter with empty fields",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"jsonData = jsonData.data||jsonData;",
									"tests[\"discussions found\"] = jsonData.count >= 1"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "token",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "\n{\n  \"token\":\"{{token}}\",\n  \"filter\":\n  {\n   \"type\": \"\",\n    \"it_service\":{\"$overlap\":[\"\"]},\n     \"$or\": [{ \"tag\":{\"$overlap\":[\"\"]}},{\"keyword\":{\"$ts\":\"\"}}]\n  },\n  \"page\":1,\n  \"per_page\":2,\n  \"sortby\":\"createdAt\",\n  \"order\":\"desc\"\n}\n\n\n\n\n"
						},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/search",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"articles",
								"search"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "search articles  by filter with name of ITService",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"jsonData = jsonData.data||jsonData;",
									"tests[\"discussions found\"] = jsonData.count >= 1"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "token",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "\n{\n  \"filter\":\n  {\n   \"type\": \"\",\n     \"$or\": [{\"it_service\":{\"$overlap\":[\"Messaging\"]}},{ \"tag\":{\"$overlap\":[\"测试\"]}},{\"keyword\":{\"$ts\":\"水电费\"}}]\n  },\n  \"page\":1,\n  \"per_page\":2,\n  \"sortby\":\"createdAt\",\n  \"order\":\"desc\"\n}\n\n"
						},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/search",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"articles",
								"search"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "search articles  order by discussion_count",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"jsonData = jsonData.data||jsonData;",
									"tests[\"discussions found\"] = jsonData.count >= 1"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "token",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "\n{\n  \"token\":\"{{token}}\",\n  \"filter\":{},\n  \"page\":1,\n  \"per_page\":2,\n  \"sortby\":\"discussion_count\",\n  \"order\":\"desc\"\n}\n\n\n\n\n"
						},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/search",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"articles",
								"search"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "count articles and discussions by keyword",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"jsonData = jsonData.data||jsonData;",
									"tests[\"1 article and 2 discussions found\"] = (jsonData.articlesCount === 1 && jsonData.discussionsCount === 2)"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "token",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "\n{\n  \"toke\":\"{{token}}\",\n  \"filter\":\n  {\n    \"type\": \"Troubleshooting\",\n  \"it_service\":{\"$overlap\":[\"pop3\",\"email\"]},\n  \"$or\": [{ \"tag\":{\"$overlap\":[\"人生\"]}},{\"keyword\":{\"$ts\":\"水电费\"}}]\n  },\n  \"countOnly\":true\n}\n"
						},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/search",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"articles",
								"search"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": " count articles and discussions by it service group and filter by keyword",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"jsonData = jsonData.data||jsonData;",
									"jsonData.forEach(function(result){",
									"    if(result.name==='Infrastructure'){",
									"        tests[\"Infrastructure group has no article and discussion\"] = (result.count.articlesCount === 1 &&result.count.discussionsCount === 0)",
									"    }",
									"    if(result.name==='Messaging'){",
									"        tests[\"Messaging group has 1 article and 2 discussion\"] = (result.count.articlesCount === 4 &&result.count.discussionsCount === 2)",
									"    }",
									"})"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "token",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "\n{\n  \"filter\":{},\n  \"countBy\":\"ITServiceGroup\"\n}\n"
						},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/search",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"articles",
								"search"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "get all tags",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"jsonData = jsonData.data||jsonData;",
									"var arraysEqual = function (a, b) {",
									"  if (a === b) return true;",
									"  if (a == null || b == null) return false;",
									"  if (a.length != b.length) return false;",
									"  for (var i = 0; i < a.length; ++i) {",
									"    if (a[i] !== b[i]) return false;",
									"  }",
									"  return true;",
									"}",
									"tests[\"all tags found\"] = arraysEqual(jsonData,[\"测试\",\"随机\"]); "
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "token",
								"value": "{{token}}"
							}
						],
						"body": {},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/tag",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"articles",
								"tag"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "search articles  by filter with title",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"jsonData = jsonData.data||jsonData;",
									"tests[\"discussions found\"] = jsonData.count >= 1"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "token",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "\n{\n  \"filter\":\n  {\n   \"title\": {\"$like\":\"%水电%\"}\n  },\n  \"page\":1,\n  \"per_page\":2,\n  \"sortby\":\"createdAt\",\n  \"order\":\"desc\"\n}\n\n"
						},
						"url": {
							"raw": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles/search",
							"protocol": "http",
							"host": [
								"{{kb_api_host}}"
							],
							"port": "{{kb_api_port}}",
							"path": [
								"KB",
								"API",
								"v1",
								"articles",
								"search"
							]
						},
						"description": null
					},
					"response": []
				}
			]
		}
	]
}